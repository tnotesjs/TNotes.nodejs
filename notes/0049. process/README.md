# [0049. process](https://github.com/tnotesjs/TNotes.nodejs/tree/main/notes/0049.%20process)

<!-- region:toc -->

- [1. ğŸ“ æ¦‚è¿°](#1--æ¦‚è¿°)
- [2. ğŸ’» demos.1 - process å¸¸è§å­—æ®µ](#2--demos1---process-å¸¸è§å­—æ®µ)
- [3. ğŸ’» demos.2 - æ ¹æ® `process.platform` åˆ¤æ–­å½“å‰ç³»ç»Ÿç¯å¢ƒ](#3--demos2---æ ¹æ®-processplatform-åˆ¤æ–­å½“å‰ç³»ç»Ÿç¯å¢ƒ)
- [4. ğŸ¤” å¦‚ä½•é€šè¿‡ process.platform ä¸­è®°å½•çš„å½“å‰å¹³å°ä¿¡æ¯æ¥åŒºåˆ†ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Ÿ](#4--å¦‚ä½•é€šè¿‡-processplatform-ä¸­è®°å½•çš„å½“å‰å¹³å°ä¿¡æ¯æ¥åŒºåˆ†ä¸åŒçš„æ“ä½œç³»ç»Ÿ)
- [5. ğŸ¤– `node 1.js args` å¦‚ä½•åœ¨ 1.js ä¸­è·å–åˆ° argsï¼Ÿ](#5--node-1js-args-å¦‚ä½•åœ¨-1js-ä¸­è·å–åˆ°-args)
- [6. ğŸ”— å¼•ç”¨](#6--å¼•ç”¨)

<!-- endregion:toc -->

## 1. ğŸ“ æ¦‚è¿°

- process ç”¨äºè·å–å½“å‰ Node.js ç¨‹åºçŠ¶æ€ã€‚

## 2. ğŸ’» demos.1 - process å¸¸è§å­—æ®µ

::: code-group

<<< ./demos/1/1.js [1.js]

:::

| å±æ€§ | è¯´æ˜ |
| --- | --- |
| `argv` | è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç”±å‘½ä»¤è¡Œæ‰§è¡Œè„šæœ¬æ—¶çš„å„ä¸ªå‚æ•°ç»„æˆ |
| `env` | è¿”å›å½“å‰ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ |
| `version` | è¿”å›å½“å‰ Node.js çš„ç‰ˆæœ¬ |
| `versions` | è¿”å›å½“å‰ Node.js çš„ç‰ˆæœ¬å·ä»¥åŠä¾èµ–åŒ… |
| `arch` | è¿”å›å½“å‰ CPU çš„æ¶æ„ï¼Œå¦‚ arm æˆ– x64 ç­‰ |
| `platform` | è¿”å›å½“å‰è¿è¡Œç¨‹åºæ‰€åœ¨çš„å¹³å°ç³»ç»Ÿï¼Œå¦‚ win32ã€linux ç­‰ |
| `execPath` | è¿”å›æ‰§è¡Œå½“å‰è„šæœ¬çš„ Node äºŒè¿›åˆ¶æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ |
| `execArgv` | è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‘½ä»¤è¡Œä¸‹æ‰§è¡Œè„šæœ¬æ—¶åœ¨ Node å¯æ‰§è¡Œæ–‡ä»¶ä¸è„šæœ¬æ–‡ä»¶ä¹‹é—´çš„å‘½ä»¤è¡Œå‚æ•° |
| `exitCode` | è¿›ç¨‹é€€å‡ºæ—¶çš„ä»£ç ï¼Œå¦‚æœè¿›ç¨‹é€šè¿‡ `process.exit()` é€€å‡ºï¼Œä¸éœ€è¦æŒ‡å®šé€€å‡ºç  |
| `config` | ä¸€ä¸ªåŒ…å«ç”¨æ¥ç¼–è¯‘å½“å‰ Node æ‰§è¡Œæ–‡ä»¶çš„ JavaScript é…ç½®é€‰é¡¹çš„å¯¹è±¡ã€‚å®ƒä¸è¿è¡Œ ./configure è„šæœ¬ç”Ÿæˆçš„ config.gypi æ–‡ä»¶ç›¸åŒ |
| `pid` | å½“å‰è¿›ç¨‹çš„è¿›ç¨‹å· |
| `ppid` | å½“å‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹çš„è¿›ç¨‹å· |
| `title` | è¿›ç¨‹å |
| `arch` | å½“å‰ CPU çš„æ¶æ„ï¼šarmã€ia32 æˆ–è€… x64 |
| `platform` | è¿è¡Œç¨‹åºæ‰€åœ¨çš„å¹³å°ç³»ç»Ÿï¼šdarwinã€freebsdã€linuxã€sunos æˆ– win32 |

## 3. ğŸ’» demos.2 - æ ¹æ® `process.platform` åˆ¤æ–­å½“å‰ç³»ç»Ÿç¯å¢ƒ

::: code-group

<<< ./demos/2/1.js [1.js]

:::

## 4. ğŸ¤” å¦‚ä½•é€šè¿‡ process.platform ä¸­è®°å½•çš„å½“å‰å¹³å°ä¿¡æ¯æ¥åŒºåˆ†ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Ÿ

```js
// å¾ˆç®€å•ä¹Ÿå¾ˆå¸¸ç”¨çš„æ“ä½œ
function printPlatform() {
  // console.log(process.platform)
  if (process.platform === 'linux') console.log('å½“å‰ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿæ˜¯ Linux')
  else if (process.platform === 'darwin')
    console.log('å½“å‰ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿæ˜¯ MacOS')
  else if (process.platform === 'win32')
    console.log('å½“å‰ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿæ˜¯ Windows')
  else console.log('å½“å‰ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿæ˜¯æœªçŸ¥')
}
printPlatform()
```

![å›¾ 0](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-11-01-16-15-49.png)

## 5. ğŸ¤– `node 1.js args` å¦‚ä½•åœ¨ 1.js ä¸­è·å–åˆ° argsï¼Ÿ

åœ¨ Node.js ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ `process.argv` æ•°ç»„æ¥è·å–ä¼ é€’ç»™è„šæœ¬çš„å‘½ä»¤è¡Œå‚æ•°ã€‚`process.argv` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†å½“ Node.js å¯åŠ¨æ—¶çš„å‘½ä»¤è¡Œå‚æ•°ã€‚æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯è¿è¡Œ Node.js çš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ï¼Œç¬¬äºŒä¸ªå…ƒç´ é€šå¸¸æ˜¯æ­£åœ¨æ‰§è¡Œçš„ JavaScript æ–‡ä»¶çš„è·¯å¾„ã€‚ä»ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ‰æ˜¯ä½ å®é™…ä¼ å…¥çš„å‚æ•°ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªåä¸º `1.js` çš„è„šæœ¬ï¼Œå¹¶ä¸”ä½ åœ¨å‘½ä»¤è¡Œä¸­è¿™æ ·è¿è¡Œå®ƒï¼š

```bash
node 1.js arg1 arg2 arg3
```

é‚£ä¹ˆåœ¨ `1.js` æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·è®¿é—®è¿™äº›å‚æ•°ï¼š

```javascript
// 1.js

// process.argv[0] - Node.js å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„
// process.argv[1] - æ­£åœ¨æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶çš„è·¯å¾„ (1.js)
// process.argv[2] - 'arg1'
// process.argv[3] - 'arg2'
// process.argv[4] - 'arg3'

console.log('ç¬¬ä¸€ä¸ªå‚æ•°:', process.argv[2])
console.log('ç¬¬äºŒä¸ªå‚æ•°:', process.argv[3])
console.log('ç¬¬ä¸‰ä¸ªå‚æ•°:', process.argv[4])

// æˆ–è€…éå†æ‰€æœ‰é¢å¤–çš„å‚æ•°
for (let i = 2; i < process.argv.length; i++) {
  console.log(`å‚æ•° ${i - 1}:`, process.argv[i])
}
```

å¦‚æœä½ æƒ³ä»¥æ›´ç»“æ„åŒ–çš„æ–¹å¼å¤„ç†å‘½ä»¤è¡Œå‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚ `yargs` æˆ– `minimist`ã€‚å®ƒä»¬æä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½æ¥è§£æå’ŒéªŒè¯å‘½ä»¤è¡Œé€‰é¡¹ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªä½¿ç”¨ `minimist` çš„ç®€å•ä¾‹å­ï¼š

é¦–å…ˆå®‰è£… `minimist`ï¼š

```bash
npm install minimist
```

ç„¶ååœ¨ä½ çš„ `1.js` è„šæœ¬ä¸­ä½¿ç”¨å®ƒï¼š

```javascript
// 1.js
const argv = require('minimist')(process.argv.slice(2))

console.log('ç¬¬ä¸€ä¸ªå‚æ•°:', argv._[0]) // å¦‚æœæ²¡æœ‰æŒ‡å®šé€‰é¡¹åï¼Œåˆ™é»˜è®¤æ”¾åœ¨ _ æ•°ç»„ä¸­
console.log('ç¬¬äºŒä¸ªå‚æ•°:', argv._[1])
console.log('ç¬¬ä¸‰ä¸ªå‚æ•°:', argv._[2])

// å‡è®¾ä½ æŒ‡å®šäº†é€‰é¡¹ï¼Œä¾‹å¦‚ --name å’Œ --age
console.log('åå­—:', argv.name)
console.log('å¹´é¾„:', argv.age)
```

å½“ä½ è¿è¡Œå¦‚ä¸‹å‘½ä»¤æ—¶ï¼š

```bash
node 1.js arg1 arg2 arg3 --name "John Doe" --age 30
```

ä¸Šè¿°ä»£ç å°†èƒ½å¤Ÿæ­£ç¡®è§£æå‡ºå„ä¸ªå‚æ•°ã€‚

## 6. ğŸ”— å¼•ç”¨

- https://nodejs.org/api/process.html
  - ğŸ”— Node.js docs process
  - ![å›¾ 0](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-04-06-15-08-14.png)
